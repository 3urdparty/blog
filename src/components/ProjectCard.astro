---
import { Image } from 'astro:assets'
import type { ImageMetadata } from 'astro'
import { cn } from '@/utils'



import FormattedDate from '../FormattedDate.astro'

type Props<Tag extends HTMLTag> = Polymorphic<{ as: Tag }> & {
	project: CollectionEntry<'project'>
	class: className,
	withDesc?: boolean
}

const { as: Tag = 'div', project, withDesc = false, className } = Astro.props

const {
data: { description, ogImage, publishDate, title, updatedDate, coverImage, iconImage },
	slug
} = project

const socialImage = ogImage ?? `/og-image/${slug}.png`
const articleDate = updatedDate?.toISOString() ?? publishDate.toISOString()
const projectDate = project.data.updatedDate ?? project.data.publishDate
---

<Tag
	class={cn(
		className,
		'flex flex-col gap-y-3 rounded-2xl border border-border bg-primary-foreground relative',
		 'transition-all hover:border-foreground/25 hover:shadow-sm'
	)}
    href=`${import.meta.env.BASE_URL}`
>
	<Image
		src={coverImage.src}
		alt={coverImage.alt}
		class='h-48 w-full rounded-2xl rounded-bl-none rounded-br-none object-cover'
		loading='eager'
	/>
  <div>
  </div>
  <Image
  src={iconImage.src}
  alt={iconImage.alt}
  class='rounded-full object-contain  w-10 h-10 p-1 bg-slate-800 border border-slate-700 absolute left-4 bottom-0 mb-20'
  loading='eager'
    />
	<div class='flex flex-col w-80 gap-y-0.5 px-5 py-4'>
    <a href=`${import.meta.env.BASE_URL}/projects/${slug}` class='text-lg font-medium'>{project.data.title}</a>
		<h2 class=''>{project.data.subtitle}</h2>
	</div>

	<slot />
</Tag>
